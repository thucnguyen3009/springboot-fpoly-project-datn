<!DOCTYPE html>
<html lang="en" xmlns="https://www.thymeleaf.org" th:replace="~{/admin/layout/layout::dynamic(~{::title},~{::main})}">

<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <!-- Thay thế title tại đây -->
    <title>Trang quản trị nhân viên| DTNsBike</title>

</head>

<body>
    <!-- Content  -->
    <main>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-route.min.js"></script>
        <!-- unminified for development -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-google-chart/1.0.0-beta.1/ng-google-chart.js"
            type="text/javascript"></script>
        <div class="container-fluid" ng-app="google-chart-sample">
            <!-- Title -->
            <div class="row column_title">
                <div class="col-md-12">
                    <div class="page_title">
                        <h2>Dashboard</h2>
                    </div>
                </div>
            </div>
            <div class="row">
                <!-- Section Dashboard -->
                <div class="col-lg-12">
                    <div class="row">
                        <!-- Dashboard thống kê 1 -->
                        <!-- Dashboard item -->
                        <div class="col-md-3 col-lg-3">
                            <div class="full counter_section margin_bottom_30">
                                <div class="couter_icon">
                                    <div>
                                        <i class="fa fa-users text-success"></i>
                                    </div>
                                </div>
                                <div class="counter_no ">
                                    <div>
                                        <h5 class="text-center text-success total_no">TỔNG TÀI KHOẢN</h5>
                                        <p class="total_no text-dark" style="font-size: 18px;"><strong>[[*{countacc}]]
                                                Tài khoản</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Dashboard item -->
                        <!-- Dashboard item -->
                        <div class="col-md-3 col-lg-3">
                            <div class="full counter_section margin_bottom_30">
                                <div class="couter_icon">
                                    <div>
                                        <i class="fa fa-tag text-primary"></i>
                                    </div>
                                </div>
                                <div class="counter_no ">
                                    <div>
                                        <h5 class="text-center text-primary">TỔNG SẢN PHẨM</h5>
                                        <p class="total_no text-dark" style="font-size: 18px;"><strong>[[*{countprod}]]
                                                Sản phẩm</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Dashboard item -->
                        <!-- Dashboard item -->
                        <div class="col-md-3 col-lg-3">
                            <div class="full counter_section margin_bottom_30">
                                <div class="couter_icon">
                                    <div>
                                        <i class="fa fa-shopping-cart text-warning"></i>
                                    </div>
                                </div>
                                <div class="counter_no ">
                                    <div>
                                        <h5 class="text-center text-warning">TỔNG ĐƠN HÀNG</h5>
                                        <p class="total_no text-dark" style="font-size: 18px;"><strong>[[*{countorder}]]
                                                Đơn hàng</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Dashboard item -->
                        <!-- Dashboard item -->
                        <div class="col-md-3 col-lg-3">
                            <div class="full counter_section margin_bottom_30">
                                <div class="couter_icon">
                                    <div>
                                        <i class="fa fa-exclamation-circle text-danger"></i>
                                    </div>
                                </div>
                                <div class="counter_no ">
                                    <div>
                                        <h5 class="text-center text-danger">SẮP HẾT HÀNG</h5>
                                        <p class="total_no text-dark" style="font-size: 18px;">
                                            <strong>[[*{countprod_saphethang}]] Sản
                                                phẩm</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Dashboard item -->

                        <!-- Dashboard thống kê 1 -->

                        <!-- Dashboard thống kê 2 -->
                        <!-- Dashboard item -->
                        <div class="col-md-3 col-lg-3">
                            <div class="full counter_section margin_bottom_30">
                                <div class="couter_icon">
                                    <div>
                                        <i class="fa fa-bar-chart text-success"></i>
                                    </div>
                                </div>
                                <div class="counter_no ">
                                    <div>
                                        <h5 class="text-center text-success total_no">TỔNG THU NHẬP</h5>
                                        <p class="total_no text-dark" style="font-size: 18px;">
                                            <strong
                                                th:if="${total!=null}">[[${#numbers.formatInteger(#aggregates.sum(reportCustomer.![total]),3,'COMMA')}]]
                                                VND</strong>
                                            <strong th:if="${total==null}">0 VND</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Dashboard item -->
                        <!-- Dashboard item -->
                        <div class="col-md-3 col-lg-3">
                            <div class="full counter_section margin_bottom_30">
                                <div class="couter_icon">
                                    <div>
                                        <i class="fa fa-newspaper-o text-primary"></i>
                                    </div>
                                </div>
                                <div class="counter_no ">
                                    <div>
                                        <h5 class="text-center text-primary">TỔNG BÀI VIẾT</h5>
                                        <p class="total_no text-dark" style="font-size: 18px;"><strong>[[*{countblog}]]
                                                bài viết</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Dashboard item -->
                        <!-- Dashboard item -->
                        <div class="col-md-3 col-lg-3">
                            <div class="full counter_section margin_bottom_30">
                                <div class="couter_icon">
                                    <div>
                                        <i class="fa fa-tags text-warning"></i>
                                    </div>
                                </div>
                                <div class="counter_no ">
                                    <div>
                                        <h5 class="text-center text-warning">TỔNG VOUCHER</h5>
                                        <p class="total_no text-dark" style="font-size: 18px;"><strong>[[*{countsale}]]
                                                Voucher</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Dashboard item -->
                        <!-- Dashboard item -->
                        <div class="col-md-3 col-lg-3">
                            <div class="full counter_section margin_bottom_30">
                                <div class="couter_icon">
                                    <div>
                                        <i class="fa fa-times-circle text-danger"></i>
                                    </div>
                                </div>
                                <div class="counter_no ">
                                    <div>
                                        <h5 class="text-center text-danger">ĐƠN HÀNG ĐÃ HỦY</h5>
                                        <p class="total_no text-dark" style="font-size: 18px;">
                                            <strong>[[*{count_orderhuy}]]
                                                Đơn hàng</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Dashboard item -->
                        <!-- Dashboard thống kê 2 -->

                        <!-- table section -->
                        <div class="col-md-12 col-lg-12">
                            <div class="white_shd full margin_bottom_30">
                                <div class="full graph_head">
                                    <div class="heading1 margin_0 text-uppercase">
                                        <h2 class="text-secondary">THỐNG KÊ THEO KHÁCH HÀNG</h2>
                                    </div>
                                </div>
                                <div class="table_section p-4">
                                    <div class="table-responsive">
                                        <table class="mt-3 table table-bordered ">
                                            <thead>
                                                <tr class="text-white text-uppercase bg-secondary text-center">
                                                    <th>STT</th>
                                                    <th>KHÁCH HÀNG</th>
                                                    <th>NGƯỜI NHẬN</th>
                                                    <th>SỐ ĐIỆN THOẠI</th>
                                                    <th>Địa chỉ </th>
                                                    <th>số lượng đơn</th>
                                                    <th>Thành tiền</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:if="${reportCustomer.isEmpty()}" class="text-center">
                                                    <td colspan="7" class="align-middle">Không có dữ liệu</td>
                                                </tr>
                                                <!-- Table item 2 -->
                                                <tr th:each="o1 : ${reportCustomer}" class="text-center h6">
                                                    <td class="align-middle">[[${o1.id}]]</td>
                                                    <td class="align-middle text-dark">[[${o1.username}]]</td>
                                                    <td class="align-middle">[[${o1.fullname}]]</td>
                                                    <td class="align-middle">[[${o1.phone}]]</td>
                                                    <td class="align-middle">[[${o1.address}]]</td>

                                                    <td class="align-middle">
                                                        [[${#numbers.formatInteger(o1.count,0,'DEFAULT')}]]</td>
                                                    <td class="align-middle text-dark">
                                                        [[${#numbers.formatInteger(o1.total,0,'COMMA')}]] VND
                                                    </td>

                                                </tr>
                                                <!-- Table item 2 -->

                                                <!-- Total row no delete :)) -->
                                                <tr class="bg-secondary text-white text-uppercase text-center">
                                                    <td class="align-middle text-right" colspan="6"><strong
                                                            class="h6">Tổng
                                                            cộng:</strong></td>
                                                    <td class="align-middle h6" th:if="${!reportCustomer.isEmpty()}">
                                                        [[${#numbers.formatInteger(#aggregates.sum(reportCustomer.![total]),3,'COMMA')}]]
                                                        VND</td>
                                                    <td class="align-middle h6" th:if="${reportCustomer.isEmpty()}">
                                                        0
                                                        VND</td>
                                                </tr>
                                                <!-- Total row no delete :)) -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- table section --> <!-- table section -->
                        <div class="col-md-12 col-lg-12">
                            <div class="white_shd full margin_bottom_30">
                                <div class="full graph_head">
                                    <div class="heading1 margin_0 text-uppercase">
                                        <h2 class="text-secondary">THỐNG KÊ THEO SẢN PHẨM</h2>
                                    </div>
                                </div>
                                <div class="table_section p-4">
                                    <div class="table-responsive">
                                        <table class="mt-3 table table-bordered ">
                                            <thead>
                                                <tr class="text-white text-uppercase bg-secondary text-center">
                                                    <th>STT</th>
                                                    <th>SẢN PHẨM</th>
                                                    <th>SỐ LƯỢNG</th>
                                                    <th>THÀNH TIỀN</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:if="${reportProducts.isEmpty()}" class="text-center">
                                                    <td colspan="4" class="align-middle">Không có dữ liệu</td>
                                                </tr>
                                                <!-- Table item 2 -->
                                                <tr th:each="o1 : ${reportProducts}" class="text-center h6">
                                                    <td class="align-middle">[[${o1.id}]]</td>
                                                    <td class="align-middle text-dark text-left">[[${o1.products}]]</td>
                                                    <td class="align-middle">
                                                        [[${#numbers.formatInteger(o1.amount,1,'COMMA')}]]
                                                    </td>
                                                    <td class="align-middle text-dark">
                                                        [[${#numbers.formatInteger(o1.total,1,'COMMA')}]] VND
                                                    </td>
                                                </tr>
                                                <!-- Table item 2 -->

                                                <!-- Total row no delete :)) -->
                                                <tr class="bg-secondary text-white text-uppercase text-center">
                                                    <td class="align-middle text-right" colspan="3"><strong
                                                            class="h6">Tổng
                                                            cộng:</strong></td>
                                                    <td class="align-middle h6" th:if="${!reportProducts.isEmpty()}">
                                                        [[${#numbers.formatInteger(#aggregates.sum(reportProducts.![total]),3,'COMMA')}]]
                                                        VND</td>
                                                    <td class="align-middle h6" th:if="${reportProducts.isEmpty()}">
                                                        0
                                                        VND</td>
                                                </tr>
                                                <!-- Total row no delete :)) -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- table section -->
                        <!-- table section -->
                        <div class="col-md-12 col-lg-12" hidden>
                            <div class="white_shd full margin_bottom_30">
                                <div class="full graph_head">
                                    <div class="heading1 margin_0 text-uppercase">
                                        <h2>TOP 3 SẢN PHẨM BÁN CHẠY NHẤT</h2>
                                    </div>
                                </div>
                                <div class="table_section p-4">
                                    <div class="table-responsive">
                                        <table class="mt-3 table table-bordered ">
                                            <thead>
                                                <tr class="text-white text-center text-uppercase"
                                                    style="background-color: rgba(5, 168, 68, 0.877);">
                                                    
                                                    <th>Tên Sản Phẩm</th>
                                                    <th>Tổng tiền</th>
                                                    <th>Danh mục</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Item table start -->
                                                <tr th:each="t,s: ${top3}" th:if="${s.index <3}" class="text-center">
                                                   
                                                    <td class="h6 align-middle  text-dark">[[${t.name}]]</td>
                                                    <td class="h6 align-middle  text-dark">
                                                        [[${#numbers.formatInteger((t.price),3,'COMMA')}]] VND</td>
                                                    <td class="h6 align-middle text-dark">
                                                        [[${t.namecate}]]
                                                    </td>
                                                </tr>
                                                <!-- Item table end -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- table section -->

                        <!-- table section -->
                        <div class="col-md-12 col-lg-12" th:if="${!hethang.isEmpty()}">
                            <div class="white_shd full margin_bottom_30">
                                <div class="full graph_head">
                                    <div class="heading1 margin_0 text-uppercase">
                                        <h2>SẢN PHẨM ĐÃ HẾT HÀNG</h2>
                                    </div>
                                </div>
                                <div class="table_section p-4">
                                    <div class="table-responsive">
                                        <div class="table-responsive">
                                            <table class="table table-bordered align-middle mt-3">
                                                <thead>
                                                    <tr class="text-center text-uppercase bg-success">
                                                        <th>
                                                            <a href="#" style="text-decoration: none;"
                                                                class="text-white">
                                                                Mã sản phẩm
                                                            </a>
                                                        </th>
                                                        <th>
                                                            <a href="#" style="text-decoration: none;"
                                                                class="text-white">
                                                                Tên sản phẩm
                                                            </a>
                                                        </th>
                                                        <th>
                                                            <a href="#" style="text-decoration: none;"
                                                                class="text-white">
                                                                Hình ảnh
                                                            </a>
                                                        </th>
                                                        <th>
                                                            <a href="#" style="text-decoration: none;"
                                                                class="text-white">
                                                                Đơn giá
                                                            </a>
                                                        </th>
                                                        <th>
                                                            <a href="#" style="text-decoration: none;"
                                                                class="text-white">
                                                                Trạng thái
                                                            </a>
                                                        </th>
                                                        <th>
                                                            <a href="#" style="text-decoration: none;"
                                                                class="text-white">
                                                                Danh mục
                                                            </a>
                                                        </th>

                                                    </tr>
                                                </thead>


                                                <tbody>
                                                    <!-- Table item  -->
                                                    <tr class="h6 text-center text-dark" th:each="listHetHang: ${hethang}">
                                                        <td class="align-middle">
                                                            #SP[[${listHetHang.productid.id}]]
                                                        </td>
                                                        <td class="align-middle text-left text-wrap" style="width: 300px;">
                                                            [[${listHetHang.productid.name+' ( Kích thước: '+listHetHang.sizeid.id+', Màu sắc: '+listHetHang.colorid.name+')'}]]
                                                        </td>
                                                        <td class="align-middle">
                                                            <img th:src="@{|/upload/product_single_img/${listHetHang.productid.img}|}"
                                                                class="img-fuild" style="width: 72px;height: 72px;">
                                                        </td>
                                                        <td class="align-middle">
                                                            [[${#numbers.formatInteger((listHetHang.productid.price+listHetHang.productid.price*(listHetHang.productid.vat/100)-listHetHang.productid.price*(listHetHang.productid.discountid.value/100)),3,'COMMA')}]]
                                                            VND
                                                        </td>
                                                        <td class="align-middle">
                                                            <p class="alert alert-danger" role="alert">Hết hàng</p>
                                                        </td>
                                                        <td class="align-middle">
                                                            [[${listHetHang.productid.catePro.name}]]
                                                        </td>
                                                    </tr>
                                                    <!-- Table item  -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- table section -->
                        <!-- table section -->
                        <div class="col-md-12 col-lg-12" hidden>
                            <div class="white_shd full margin_bottom_30">
                                <div class="full graph_head">
                                    <div class="heading1 margin_0 text-uppercase">
                                        <h2>NHÂN VIÊN MỚI</h2>
                                    </div>
                                </div>
                                <div class="table_section p-4">
                                    <div class="table-responsive">
                                        <table class="mt-3 table table-bordered ">
                                            <thead>
                                                <tr class="text-white"
                                                    style="background-color: rgba(5, 168, 68, 0.877);">
                                                    <th>ID Nhân viên</th>
                                                    <th>Họ tên</th>
                                                    <th>Email</th>
                                                    <th>Số điện thoại</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Table item 2 -->
                                                <tr>
                                                    <td>#teonv@123</td>
                                                    <td>Nguyễn Văn Tèo</td>
                                                    <td>teovn@example.com</td>
                                                    <td>0987654321</td>
                                                </tr>
                                                <!-- Table item 2 -->
                                                <!-- Table item 2 -->
                                                <tr>
                                                    <td>#teonv@123</td>
                                                    <td>Nguyễn Văn Tèo</td>
                                                    <td>teovn@example.com</td>
                                                    <td>0987654321</td>
                                                </tr>
                                                <!-- Table item 2 -->
                                                <!-- Table item 2 -->
                                                <tr>
                                                    <td>#teonv@123</td>
                                                    <td>Nguyễn Văn Tèo</td>
                                                    <td>teovn@example.com</td>
                                                    <td>0987654321</td>
                                                </tr>
                                                <!-- Table item 2 -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- table section -->
                    </div>
                </div>

                <!-- Very Hard Pro :))) -->
                <!--Chart row -->
                <!-- Chart Report 0 -->
                <div class="col-md-12 col-lg-12 mb-3" hidden>
                    <div class="" ng-controller="Report0ChartCtrl">
                        <div google-chart chart="myChartObject" style="height:400px; width:100%;"></div>
                    </div>
                </div>
                <!-- Chart Report 0 -->
                <div class="col-md-12 col-lg-12 column1" hidden>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="white_shd full margin_bottom_30">
                                <div class="full graph_head">
                                    <div class="heading1 margin_0 text-uppercase">
                                        <h2>Dữ liệu hàng tháng</h2>
                                    </div>
                                </div>
                                <div class="" ng-controller="Report1ChartCtrl">
                                    <div google-chart chart="myChartObject" style="height:400px; width:100%;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="white_shd full margin_bottom_30">
                                <div class="full graph_head">
                                    <div class="heading1 margin_0 text-uppercase">
                                        <h2>Thống kê doanh số</h2>
                                    </div>
                                </div>
                                <div class="" ng-controller="Report2ChartCtrl">
                                    <div google-chart chart="myChartObject" style="height:400px; width:100%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end row -->
                <!-- Very Hard Pro :))) -->
            </div>
        </div>
        <!-- chart -->
        <script th:src="@{/admin/js/report2_chart.js}" type="text/javascript"></script>
        <script type="text/javascript" th:inline="javascript">
            var report = /*[(${report})]*/'';
            var report2 = /*[(${report2})]*/'';
            var report3 = /*[(${report3})]*/'';
            var report4 = /*[(${report4})]*/'';
        </script>
    </main>
    <!-- Content  -->
</body>

</html>